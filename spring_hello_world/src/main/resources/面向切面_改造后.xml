<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">
    <bean id="sleep" class="org.springinaction.oldKnights.Sleep">
        <constructor-arg value="#{T(System).out}"/>
    </bean>


    <bean class="org.springinaction.oldKnights.Person" id="person">
        <constructor-arg index="0" ref="sleep"/>
        <constructor-arg index="1" ref="logService"/>
    </bean>

    <bean id="logService" class="org.springinaction.oldKnights.LogService">
        <constructor-arg value="#{T(System).out}"/>
    </bean>


    <aop:config>
        <!--申明切面，将一个bean 声明为一个切面-->
        <aop:aspect ref="logService">
            <aop:pointcut id="person_triggleDoSthImp" expression="execution(**.triggleDoSthImp(..))"/>

            <aop:before method="logBeforeOperatoin" pointcut-ref="person_triggleDoSthImp"/>
            <aop:after method="logAfterOperatoin" pointcut-ref="person_triggleDoSthImp"/>

        </aop:aspect>


    </aop:config>

</beans>
